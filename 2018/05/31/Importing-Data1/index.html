<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Python," />










<meta name="description" content="Datacamp course notes on importing data from various sources of various types.">
<meta name="keywords" content="Python">
<meta property="og:type" content="article">
<meta property="og:title" content="DataCamp - Importing Data (Part 1)">
<meta property="og:url" content="https://joannaoyzl.github.io/2018/05/31/Importing-Data1/index.html">
<meta property="og:site_name" content="Joanna">
<meta property="og:description" content="Datacamp course notes on importing data from various sources of various types.">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-05-31T19:21:21.169Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DataCamp - Importing Data (Part 1)">
<meta name="twitter:description" content="Datacamp course notes on importing data from various sources of various types.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://joannaoyzl.github.io/2018/05/31/Importing-Data1/"/>





  <title>DataCamp - Importing Data (Part 1) | Joanna</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-134453862-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Joanna</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://joannaoyzl.github.io/2018/05/31/Importing-Data1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Joanna">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joanna">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">DataCamp - Importing Data (Part 1)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-31T09:55:42-07:00">
                2018-05-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Course-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">Course Notes</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/05/31/Importing-Data1/" class="leancloud_visitors" data-flag-title="DataCamp - Importing Data (Part 1)">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Datacamp course notes on importing data from various sources of various types.<br><a id="more"></a></p>
<h1 id="Importing-Text-Files"><a href="#Importing-Text-Files" class="headerlink" title="Importing Text Files"></a>Importing Text Files</h1><p>Types of text files:</p>
<ol>
<li>Plain text files</li>
<li>Table data: containing records. (flat file)</li>
</ol>
<h2 id="Importing-Plain-Text-Files"><a href="#Importing-Plain-Text-Files" class="headerlink" title="Importing Plain Text Files"></a>Importing Plain Text Files</h2><p>To read a plain text file, we can use Python’s basic open function to open a connection to the file<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">filename = <span class="string">'huck_finn.txt'</span></span><br><span class="line">file = open(filename, mode = <span class="string">'r'</span>) <span class="comment"># 'r' = read, to make sure we are only reading it, not writing it or sth else.</span></span><br><span class="line">text = file.read()</span><br><span class="line">file.close() <span class="comment"># make sure you close the connection after saving it to a variable</span></span><br><span class="line">print(text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Note: if you want to write to a file</span></span><br><span class="line">filename = <span class="string">'huck_finn.txt'</span></span><br><span class="line">file = open(filename, mode = <span class="string">'w'</span>) <span class="comment"># 'w' = write</span></span><br></pre></td></tr></table></figure></p>
<p>To avoid having a closing connection to the file by using a <code>with</code> statement. This will allow you to create a context in which you can execute your command with the file open. Once out of this context, the file is no longer open. That’s also why <code>with</code> is called a <em>Context Manager</em>.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'huck_finn.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> file:</span><br><span class="line">	print(file.read())</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read line by line</span></span><br><span class="line"><span class="comment"># Read &amp; print the first 3 lines</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'moby_dick.txt'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    print(file.readline())</span><br><span class="line">    print(file.readline())</span><br><span class="line">    print(file.readline())</span><br></pre></td></tr></table></figure></p>
<p><strong>Exploring Working Directory</strong><br>Starting a line with <code>!</code> gives you complete system shell access.<br><code>!ls</code> will display the contents of your current directory. Or the following:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">wd = os.getcwd()</span><br><span class="line">os.listdir(wd)</span><br></pre></td></tr></table></figure></p>
<h2 id="Importing-Flat-Files"><a href="#Importing-Flat-Files" class="headerlink" title="Importing Flat Files"></a>Importing Flat Files</h2><p>Flat files are basic text files containing records, which is table data without structured relationships. This in contrast with relational database, in which columns of distinct tables can be related. Each record means a row of fields or attributes. Each column is a feature or attributes. Note whether the file has a header is important when importing the data.</p>
<p>Common file extensions are:</p>
<ul>
<li>.csv: comma separated values</li>
<li>.txt: text file(separated by characters or sequence of characters other than commas, such as a tab. This separator is called a delimiter)</li>
</ul>
<h3 id="NumPy"><a href="#NumPy" class="headerlink" title="NumPy"></a>NumPy</h3><p>NumPy arrays are standard for storing numerical data, and is essential for other packages like scikit-learn. We can use <code>loadtxt()</code> and <code>genformtxt()</code> to load data into NumPy.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">filename = <span class="string">'MNIST_header.text'</span></span><br><span class="line">data = np.loadtxt(filename,</span><br><span class="line">				  delimiter = <span class="string">','</span>, <span class="comment">#'\t' for tab</span></span><br><span class="line">				  skiprows = <span class="number">1</span>, <span class="comment"># skip the first row, which is the header</span></span><br><span class="line">				  usecols = [<span class="number">0</span>, <span class="number">2</span>]) <span class="comment"># only use the first and the third columns</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># To import data as strings</span></span><br><span class="line">data = np.loadtxt(filename,</span><br><span class="line">				  delimiter = <span class="string">','</span>,</span><br><span class="line">				  dtype = str) <span class="comment"># can also be float</span></span><br></pre></td></tr></table></figure></p>
<p><code>loadtxt()</code> is not that useful when we have mixed datatype in a dataset. We can use <code>genfromtxt()</code> to handle such structures.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data = np.genfromtxt(<span class="string">'titanic.csv'</span>,</span><br><span class="line">					 delimiter = <span class="string">','</span>,</span><br><span class="line">					 names = <span class="keyword">True</span>, <span class="comment">#T = There is a header</span></span><br><span class="line">					 dtype = <span class="keyword">None</span>) <span class="comment">#figure out what types each column should be by itself</span></span><br><span class="line"><span class="comment"># To access the row</span></span><br><span class="line">data[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># To access the column</span></span><br><span class="line">data[<span class="string">'Survived'</span>]</span><br></pre></td></tr></table></figure></p>
<p>Because the data are of different types, <code>data</code> is an object called a <em>structured array</em>. Because numpy arrays have to contain elements that are all the same type, the structured array solves this by being a 1D array, where each element of the array is a row of the flat file imported. </p>
<p><code>recfromcsv()</code> has the defaults <code>delimiter = &#39;,&#39;</code> and <code>names = True</code> in addition to <code>dtype = None</code></p>
<h3 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h3><p>To have two-dimensional labeled data structure(s) with columns of potentially different types, to be able to manipulate, slice, reshape, groupby, join, merge, perform statistcis, work with time series data…. We need DataFrame.</p>
<p>DataFrame = pythonic analog of R’s data frame.</p>
<p>It’s now standard and best practice to use pandas to import flat files.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">file = <span class="string">'titanic.csv'</span></span><br><span class="line">data = pd.read_csv(file, </span><br><span class="line">				   nrows = <span class="number">5</span>, <span class="comment">#only need first 4 rows</span></span><br><span class="line">				   header = <span class="keyword">None</span>) <span class="comment"># no header in this file</span></span><br><span class="line">data.head()</span><br><span class="line">data_array = data.values <span class="comment"># Build a numpy array from the DataFrame</span></span><br></pre></td></tr></table></figure>
<p>Customizing your pandas import<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import matplotlib.pyplot as plt</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Assign filename: file</span></span><br><span class="line">file = <span class="string">'titanic_corrupt.txt'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Import file: data</span></span><br><span class="line">data = pd.read_csv(file, </span><br><span class="line">				   sep=<span class="string">'\t'</span>, </span><br><span class="line">				   comment=<span class="string">'#'</span>, <span class="comment">#takes characters that comments occur after in the file</span></span><br><span class="line">				   na_values=<span class="string">'Nothing'</span>) <span class="comment">#takes a list of strings to recognize as NA/NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the head of the DataFrame</span></span><br><span class="line">print(data.head())</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot 'Age' variable in a histogram</span></span><br><span class="line">pd.DataFrame.hist(data[[<span class="string">'Age'</span>]])</span><br><span class="line">plt.xlabel(<span class="string">'Age (years)'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'count'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p>
<h1 id="Pickled-Files"><a href="#Pickled-Files" class="headerlink" title="Pickled Files"></a>Pickled Files</h1><ul>
<li>File type native to Python </li>
<li>Motivation: many datatypes for which it isn’t obvious how to store them</li>
<li>Pickled files are serialized = convert object to bytestream</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickel</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'pickled_fruit.pkl'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> file: <span class="comment"># 'rb' = read, binary (computer readable)</span></span><br><span class="line">	data = pickle.load(file)</span><br></pre></td></tr></table></figure>
<h1 id="Excel-File"><a href="#Excel-File" class="headerlink" title="Excel File"></a>Excel File</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">file = <span class="string">'urbanpop.xlsx'</span></span><br><span class="line">data = pd.ExcelFile(file)</span><br><span class="line">print(data.sheet_names)</span><br><span class="line">df1 = data.parse(<span class="string">'1960-1966'</span>) <span class="comment">#sheet name</span></span><br><span class="line">df2 = data.parse(<span class="number">0</span>) <span class="comment">#sheet index, as a float</span></span><br></pre></td></tr></table></figure>
<p>Customizing the import:<br><em>Note that the arguments all need to be of <code>list</code> type</em><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df1 = xl.parse(<span class="number">0</span>, skiprows = [<span class="number">0</span>], </span><br><span class="line">                  names = [<span class="string">'Country'</span>, <span class="string">'AAM due to War (2002)'</span>])<span class="comment">#change the column names</span></span><br></pre></td></tr></table></figure></p>
<h1 id="SAS-File"><a href="#SAS-File" class="headerlink" title="SAS File"></a>SAS File</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import sas7bdat package</span></span><br><span class="line"><span class="keyword">from</span> sas7bdat <span class="keyword">import</span> SAS7BDAT</span><br><span class="line"></span><br><span class="line"><span class="comment"># Save file to a DataFrame: df_sas</span></span><br><span class="line"><span class="keyword">with</span> SAS7BDAT(<span class="string">'sales.sas7bdat'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    df_sas = file.to_data_frame()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print head of DataFrame</span></span><br><span class="line">print(df_sas.head())</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot histogram of DataFrame features (pandas and pyplot already imported)</span></span><br><span class="line">pd.DataFrame.hist(df_sas[[<span class="string">'P'</span>]])</span><br><span class="line">plt.ylabel(<span class="string">'count'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h1 id="Stata-File"><a href="#Stata-File" class="headerlink" title="Stata File"></a>Stata File</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import pandas</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load Stata file into a pandas DataFrame: df</span></span><br><span class="line">df = pd.read_stata(<span class="string">'disarea.dta'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the head of the DataFrame df</span></span><br><span class="line">print(df.head())</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot histogram of one column of the DataFrame</span></span><br><span class="line">pd.DataFrame.hist(df[[<span class="string">'disa10'</span>]])</span><br><span class="line">plt.xlabel(<span class="string">'Extent of disease'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Number of coutries'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h1 id="HDF5-File"><a href="#HDF5-File" class="headerlink" title="HDF5 File"></a>HDF5 File</h1><ul>
<li>Hierarchical Data Format version 5</li>
<li>Standard for storing large quantities of numerical data</li>
<li>Datasets can be hundreds of gigabytes or terabytes</li>
<li>HDF5 can scale to exabytes<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import packages</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"></span><br><span class="line"><span class="comment"># Assign filename: file</span></span><br><span class="line">file = <span class="string">'LIGO_data.hdf5'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load file: data</span></span><br><span class="line">data = h5py.File(file, <span class="string">'r'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the datatype of the loaded file</span></span><br><span class="line">print(type(data))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the keys of the file</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> data.keys():</span><br><span class="line">    print(key)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the HDF5 group: group</span></span><br><span class="line">group = data[<span class="string">'strain'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check out keys of group</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> group.keys():</span><br><span class="line">    print(key)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set variable equal to time series data: strain</span></span><br><span class="line">strain = data[<span class="string">'strain'</span>][<span class="string">'Strain'</span>].value</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set number of time points to sample: num_samples</span></span><br><span class="line">num_samples = <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set time vector</span></span><br><span class="line">time = np.arange(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>/num_samples) <span class="comment">#(start, end, interval)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot data</span></span><br><span class="line">plt.plot(time, strain[:num_samples])</span><br><span class="line">plt.xlabel(<span class="string">'GPS Time (s)'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'strain'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="MATLAB-Files"><a href="#MATLAB-Files" class="headerlink" title="MATLAB Files"></a>MATLAB Files</h1><ul>
<li>“Matrix Laboratory”</li>
<li>Industry standard in engineering and science</li>
<li>python keys = MATLAB variable names</li>
<li>python values = object assigend to variables<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import package</span></span><br><span class="line"><span class="keyword">import</span> scipy.io</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load MATLAB file: mat</span></span><br><span class="line">mat = scipy.io.loadmat(<span class="string">'albeck_gene_expression.mat'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the datatype type of mat</span></span><br><span class="line">print(type(mat)) <span class="comment">#dict</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># Print the keys of the MATLAB dictionary</span></span><br><span class="line">print(mat.keys())</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the type of the value corresponding to the key 'CYratioCyt'</span></span><br><span class="line">print(type(mat[<span class="string">'CYratioCyt'</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the shape of the value corresponding to the key 'CYratioCyt'</span></span><br><span class="line">print(np.shape(mat[<span class="string">'CYratioCyt'</span>])) <span class="comment">#dimensions</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Subset the array and plot it</span></span><br><span class="line">data = mat[<span class="string">'CYratioCyt'</span>][<span class="number">25</span>, <span class="number">5</span>:]</span><br><span class="line">fig = plt.figure()</span><br><span class="line">plt.plot(data)</span><br><span class="line">plt.xlabel(<span class="string">'time (min.)'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'normalized fluorescence (measure of expression)'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Relational-Databases"><a href="#Relational-Databases" class="headerlink" title="Relational Databases"></a>Relational Databases</h1><p>Workflow of SQL querying:</p>
<ol>
<li>Import packages and functions</li>
<li>Create the database engine</li>
</ol>
<ul>
<li>SQLite database: fast and simple</li>
<li>SQLAlchemy: works with many RDMS</li>
</ul>
<ol start="3">
<li>Connect to the engine</li>
<li>Query the database</li>
<li>Save query results to a DataFrame</li>
<li>Close the connection</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line">engine = create_engine(<span class="string">'sqlite:///Chinook.sqlite'</span>)</span><br><span class="line">table_names = engine.table_names()</span><br><span class="line"></span><br><span class="line">con = engine.connect()</span><br><span class="line">rs = con.execute(<span class="string">'SELECT * FROM Orders'</span>)</span><br><span class="line">df = pd.DataFrame(rs.fetchall()) <span class="comment">#store the results to a df</span></span><br><span class="line">df.columns = rs.keys() <span class="comment">#to make the column name right</span></span><br><span class="line">con.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Or to save the trouble of closing a connection:</span></span><br><span class="line"><span class="keyword">with</span> engine.connect() <span class="keyword">as</span> con:</span><br><span class="line">	rs = con.execute(<span class="string">'SELECT * FROM Orders'</span>)</span><br><span class="line">	df = pd.DataFrame(rs.fetchmany(size = <span class="number">5</span>)) <span class="comment">#store 5 rows instead of all rows</span></span><br><span class="line">	df.columns = rs.keys()</span><br></pre></td></tr></table></figure>
<p>We can also query the relational databases directly with pandas:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">engine = create_engine(<span class="string">'sqlite:///Chinook.sqlite'</span>)</span><br><span class="line">df = pd.read_sql_query(<span class="string">"SELECT * FROM Orders"</span>, engine)</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Python/" rel="tag"># Python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/29/Python-DS-Toolbox2/" rel="next" title="DataCamp - Python Data Science Toolbox (Part2)">
                <i class="fa fa-chevron-left"></i> DataCamp - Python Data Science Toolbox (Part2)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/05/31/Data-Cleaning/" rel="prev" title="DataCamp - Cleaning Data in Python">
                DataCamp - Cleaning Data in Python <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview sidebar-nav-active" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Joanna" />
            
              <p class="site-author-name" itemprop="name">Joanna</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Importing-Text-Files"><span class="nav-text">Importing Text Files</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Importing-Plain-Text-Files"><span class="nav-text">Importing Plain Text Files</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Importing-Flat-Files"><span class="nav-text">Importing Flat Files</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#NumPy"><span class="nav-text">NumPy</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pandas"><span class="nav-text">Pandas</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pickled-Files"><span class="nav-text">Pickled Files</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Excel-File"><span class="nav-text">Excel File</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SAS-File"><span class="nav-text">SAS File</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Stata-File"><span class="nav-text">Stata File</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HDF5-File"><span class="nav-text">HDF5 File</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MATLAB-Files"><span class="nav-text">MATLAB Files</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Relational-Databases"><span class="nav-text">Relational Databases</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Joanna</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a></div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("sEEYEudBHdtybAJf5AQkiOl2-gzGzoHsz", "cDbeqqCJt4dq4hu7C9GaCrHB");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
